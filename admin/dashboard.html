<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>לוח בקרה - מערכת ניהול</title>
    <meta name="description" content="לוח בקרה לניהול תוכן ומידע">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/admin.css">
</head>
<body class="admin-dashboard">
    <div class="admin-layout">
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <h2>מערכת ניהול</h2>
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <div class="user-name">מנהל מערכת</div>
                        <a href="login.html" class="logout-link">יציאה</a>
                    </div>
                </div>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active">
                        <a href="#dashboard" class="nav-link">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>לוח בקרה</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#articles" class="nav-link">
                            <i class="fas fa-newspaper"></i>
                            <span>מאמרים</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#statistics" class="nav-link">
                            <i class="fas fa-chart-bar"></i>
                            <span>סטטיסטיקות</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#submissions" class="nav-link">
                            <i class="fas fa-envelope"></i>
                            <span>פניות</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#analytics" class="nav-link">
                            <i class="fas fa-analytics"></i>
                            <span>אנליטיקה</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#settings" class="nav-link">
                            <i class="fas fa-cog"></i>
                            <span>הגדרות</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="admin-main">
            <header class="admin-header">
                <div class="header-title">
                    <h1>לוח בקרה</h1>
                    <p>ברוכים הבאים למערכת ניהול הייטק בית שמש</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" id="addArticleBtn">
                        <i class="fas fa-plus"></i>
                        הוסף מאמר חדש
                    </button>
                </div>
            </header>

            <div class="admin-content">
                <section id="dashboard-section" class="content-section active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-number">24</h3>
                                <p class="stat-label">מאמרים פורסמו</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-number">156</h3>
                                <p class="stat-label">פניות מחברות</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-number">523</h3>
                                <p class="stat-label">מפתחים רשומים</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-number">8,432</h3>
                                <p class="stat-label">צפיות באתר</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3>מאמרים אחרונים</h3>
                                <a href="#articles" class="view-all">צפייה בכולם</a>
                            </div>
                            <div class="card-content">
                                <div class="recent-items" id="recentArticles">
                                    <div class="loading">טוען מאמרים אחרונים...</div>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3>פניות אחרונות</h3>
                                <a href="#submissions" class="view-all">צפייה בכולן</a>
                            </div>
                            <div class="card-content">
                                <div class="recent-items" id="recentContacts">
                                    <div class="loading">טוען פניות אחרונות...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="articles-section" class="content-section">
                    <div class="section-header">
                        <h2>ניהול מאמרים</h2>
                        <button class="btn btn-primary" id="newArticleBtn">
                            <i class="fas fa-plus"></i>
                            מאמר חדש
                        </button>
                    </div>
                    <div class="articles-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>כותרת</th>
                                    <th>מחבר</th>
                                    <th>תאריך פרסום</th>
                                    <th>סטטוס</th>
                                    <th>פעולות</th>
                                </tr>
                            </thead>
                            <tbody id="articlesTableBody">
                                <tr>
                                    <td colspan="5" class="loading-row">
                                        <div class="loading">טוען מאמרים...</div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <section id="statistics-section" class="content-section">
                    <div class="section-header">
                        <h2>ניהול סטטיסטיקות</h2>
                        <button class="btn btn-primary" id="addStatisticBtn">
                            <i class="fas fa-plus"></i>
                            עדכון סטטיסטיקה
                        </button>
                    </div>
                    <div class="statistics-form">
                        <form id="statisticsForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="devCount">מספר מפתחים</label>
                                    <input type="number" id="devCount" name="devCount" value="500">
                                </div>
                                <div class="form-group">
                                    <label for="companyCount">מספר חברות</label>
                                    <input type="number" id="companyCount" name="companyCount" value="30">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="bootcampCount">תוכניות הכשרה</label>
                                    <input type="number" id="bootcampCount" name="bootcampCount" value="8">
                                </div>
                                <div class="form-group">
                                    <label for="successRate">אחוז הצלחה</label>
                                    <input type="number" id="successRate" name="successRate" value="95">
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">עדכן סטטיסטיקות</button>
                        </form>
                    </div>
                </section>

                <section id="submissions-section" class="content-section">
                    <div class="section-header">
                        <h2>ניהול פניות</h2>
                    </div>
                    <div class="submissions-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>שם חברה</th>
                                    <th>איש קשר</th>
                                    <th>סיבת פנייה</th>
                                    <th>תאריך</th>
                                    <th>סטטוס</th>
                                    <th>פעולות</th>
                                </tr>
                            </thead>
                            <tbody id="contactsTableBody">
                                <tr>
                                    <td colspan="6" class="loading-row">
                                        <div class="loading">טוען פניות...</div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <section id="analytics-section" class="content-section">
                    <div class="section-header">
                        <h2>אנליטיקה</h2>
                    </div>
                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <h3>תעבורה לאתר</h3>
                            <div class="chart-container">
                                <canvas id="trafficChart"></canvas>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>פניות מחברות</h3>
                            <div class="chart-container">
                                <canvas id="submissionsChart"></canvas>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>מקורות תעבורה</h3>
                            <div class="chart-container">
                                <canvas id="sourcesChart"></canvas>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>דפים פופולריים</h3>
                            <div class="popular-pages">
                                <div class="page-item">
                                    <span class="page-name">דף הבית</span>
                                    <span class="page-views">3,245 צפיות</span>
                                </div>
                                <div class="page-item">
                                    <span class="page-name">כישרונות</span>
                                    <span class="page-views">2,187 צפיות</span>
                                </div>
                                <div class="page-item">
                                    <span class="page-name">צור קשר</span>
                                    <span class="page-views">1,523 צפיות</span>
                                </div>
                                <div class="page-item">
                                    <span class="page-name">חדשות</span>
                                    <span class="page-views">987 צפיות</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="settings-section" class="content-section">
                    <div class="section-header">
                        <h2>הגדרות</h2>
                    </div>
                    <div class="settings-form">
                        <form id="settingsForm">
                            <div class="form-group">
                                <label for="siteTitle">כותרת האתר</label>
                                <input type="text" id="siteTitle" name="siteTitle" value="הייטק בית שמש">
                            </div>
                            <div class="form-group">
                                <label for="siteDescription">תיאור האתר</label>
                                <textarea id="siteDescription" name="siteDescription" rows="3">מרכז הכישרונות הטכנולוגיים של בית שמש</textarea>
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">דוא"ל ליצירת קשר</label>
                                <input type="email" id="contactEmail" name="contactEmail" value="info@beitshemeshtech.org">
                            </div>
                            <div class="form-group">
                                <label for="contactPhone">טלפון ליצירת קשר</label>
                                <input type="tel" id="contactPhone" name="contactPhone" value="03-1234567">
                            </div>
                            <button type="submit" class="btn btn-primary">שמור הגדרות</button>
                        </form>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal for adding/editing articles -->
    <div id="articleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">הוסף מאמר חדש</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="articleForm">
                    <div class="form-group">
                        <label for="articleTitle">כותרת</label>
                        <input type="text" id="articleTitle" name="articleTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="articleAuthor">מחבר</label>
                        <input type="text" id="articleAuthor" name="articleAuthor" required>
                    </div>
                    <div class="form-group">
                        <label for="articleCategory">קטגוריה</label>
                        <select id="articleCategory" name="articleCategory" required>
                            <option value="">בחר קטגוריה</option>
                            <option value="startups">סטארטאפים</option>
                            <option value="education">הכשרות</option>
                            <option value="events">אירועים</option>
                            <option value="success">הצלחות</option>
                            <option value="technology">טכנולוגיה</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="articleImage">קישור לתמונה</label>
                        <input type="url" id="articleImage" name="articleImage" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label for="articleContent">תוכן</label>
                        <textarea id="articleContent" name="articleContent" rows="10" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="articleExcerpt">תקציר</label>
                        <textarea id="articleExcerpt" name="articleExcerpt" rows="3" placeholder="תקציר קצר שיוצג ברשימת המאמרים"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="articleTags">תגיות (מופרדות בפסיק)</label>
                        <input type="text" id="articleTags" name="articleTags" placeholder="טכנולוגיה, הייטק, בית שמש">
                    </div>
                    <div class="form-group">
                        <label for="articleStatus">סטטוס</label>
                        <select id="articleStatus" name="articleStatus">
                            <option value="draft">טיוטה</option>
                            <option value="published">פורסם</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary modal-cancel">ביטול</button>
                        <button type="submit" class="btn btn-primary">שמור</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal for viewing submission details -->
    <div id="submissionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>פרטי פנייה</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="submission-details">
                    <div class="detail-row">
                        <span class="detail-label">שם חברה:</span>
                        <span class="detail-value" id="modalCompanyName"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">איש קשר:</span>
                        <span class="detail-value" id="modalContactPerson"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">דוא"ל:</span>
                        <span class="detail-value" id="modalEmail"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">טלפון:</span>
                        <span class="detail-value" id="modalPhone"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">סיבת פנייה:</span>
                        <span class="detail-value" id="modalReason"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">מספר מפתחים דרוש:</span>
                        <span class="detail-value" id="modalDevelopersNeeded"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">טכנולוגיות:</span>
                        <span class="detail-value" id="modalTechStack"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">הודעה:</span>
                        <span class="detail-value" id="modalMessage"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">תאריך:</span>
                        <span class="detail-value" id="modalDate"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">סטטוס:</span>
                        <span class="detail-value" id="modalStatus"></span>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" id="respondBtn">הגב</button>
                    <button class="btn btn-secondary modal-cancel">סגור</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for responding to submissions -->
    <div id="responseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>הגב לפנייה</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="contact-summary">
                    <h4>פרטי הפונה:</h4>
                    <p><strong>חברה:</strong> <span id="responseCompanyName"></span></p>
                    <p><strong>איש קשר:</strong> <span id="responseContactPerson"></span></p>
                    <p><strong>דוא"ל:</strong> <span id="responseEmail"></span></p>
                </div>
                <form id="responseForm">
                    <div class="form-group">
                        <label for="responseSubject">נושא</label>
                        <input type="text" id="responseSubject" name="subject" required>
                    </div>
                    <div class="form-group">
                        <label for="responseMessage">תוכן התגובה</label>
                        <textarea id="responseMessage" name="message" rows="8" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="updateStatus">עדכן סטטוס</label>
                        <select id="updateStatus" name="status">
                            <option value="new">חדש</option>
                            <option value="in-progress">בטיפול</option>
                            <option value="completed">הושלם</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn btn-primary">שלח תגובה</button>
                        <button type="button" class="btn btn-secondary modal-cancel">ביטול</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/admin-dashboard-backend.js"></script>
</body>
</html>